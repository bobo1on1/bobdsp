<!DOCTYPE html>
<html lang="en"><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Visualizers</title>
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="js/json2.js"></script>
  </head>
  <body>
    <script>

      function CVisualizer(visualizerdiv)
      {
        $.getJSON('./visualizer', ParseVisualizer);

        function ParseVisualizer(visualizer)
        {
          visualizerdiv.style.height = String(200 - (visualizer.visualizers[0].value * 200)) + "px";

          var postjson = JSON.stringify({"index" : visualizer.index, "timeout" : 60000});
          $.post("./visualizer", postjson, ParseVisualizer);
        }
      }

      $(document).ready(function()
      {
        var visualizer = new CVisualizer(document.getElementById("vu"));
      });

    </script>
    <div id="visualizer" style="width:20px;height:200px;background-color:#FF0000">
      <div id="vu" style="width:20px;height:20px;float:bottom;background-color:#000000"></div>
    </div>
  </body>
</html>
